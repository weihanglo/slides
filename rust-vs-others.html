<!DOCTYPE html>
<html>
  <head>
    <title>Onboarding Training: Rust</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style type="text/css" media="screen">
      img {
        max-width: 100%;
        max-height: 100%;
      }
    </style>
  </head>
  <body>
    <textarea id="source">
class: middle, center

# Onboarding Training: Rust

![](./rust-vs-others/rustconf-footer-illustration.svg)

<img 
  style="border-radius: 50px"
  src="https://www.gravatar.com/avatar/67644641ead7ae60a795a14b7e102973?s=100" 
  alt="Weihang Lo">

<a href="https://github.com/weihanglo">@weihanglo</a>

---

## ä½ æ˜¯å¦æ›¾æœ‰ä»¥ä¸‹ç–‘å•ï¼Ÿ

- Rust æ˜¯ä»€éº¼é¬¼èªè¨€

- æ„Ÿè¦ºæ²’ä»€éº¼äººåœ¨ç”¨

- æ‡‰è©²ä¸‹å€‹æœˆå°±æ­»äº†å§

- è€å­å­¸ä¸å‹•äº†

- å°ä¸Šçš„ï¼Œä½ å¯ä»¥ä¸€å¤©ä¸æ Rust å— ğŸ–•ğŸ½

![](https://intro.rustbridge.com/img/ferris.gif)

---

![](rust-vs-others/aws.png)

[Why AWS loves Rust, and how weâ€™d like to help](https://aws.amazon.com/blogs/opensource/why-aws-loves-rust-and-how-wed-like-to-help/)

---

![](rust-vs-others/choromium.png)

[Rust and C++ interoperability](https://www.chromium.org/Home/chromium-security/memory-safety/rust-and-c-interoperability)

---

![](rust-vs-others/cloudflare.png)

[Enjoy a slice of QUIC, and Rust!](https://blog.cloudflare.com/enjoy-a-slice-of-quic-and-rust/)

---

![](rust-vs-others/curl.png)

[Project Hyper-as-a-HTTP-backend-in-curl](https://github.com/curl/curl/wiki/Hyper)

---

![](rust-vs-others/discord.png)

[Why Discord is switching from Go to Rust](https://blog.discord.com/why-discord-is-switching-from-go-to-rust-a190bbca2b1f)

---

![](rust-vs-others/figma.png)

[Rust in Production at Figma](https://www.figma.com/blog/rust-in-production-at-figma/)

---

![](rust-vs-others/fuchsia.png)

[Fuchsia Programming Language Policy: Rust](https://fuchsia.dev/fuchsia-src/contribute/governance/policy/programming_languages#rust)

---

![](rust-vs-others/microsoft.png)

[Microsoft: Rust Is the Industryâ€™s â€˜Best Chanceâ€™ at Safe Systems Programming](https://thenewstack.io/microsoft-rust-is-the-industrys-best-chance-at-safe-systems-programming/)

---

![](rust-vs-others/sentry.png)

[https://thenewstack.io/microsoft-rust-is-the-industrys-best-chance-at-safe-systems-programming/](https://blog.sentry.io/2016/10/19/fixing-python-performance-with-rust)

---

class: middle, center

# çœ‹å®Œå¯¦éš›æ¡ˆä¾‹å¾Œï¼Œè¦ºå¾— Rust æ˜¯æ€æ¨£çš„èªè¨€ï¼Ÿ

<img src="https://rustacean.net/more-crabby-things/dancing-ferris.gif" width="50%">

---

**vs. C++ (memory safefy)**

<iframe loading="lazy" width="100%" height="550" src="https://godbolt.org/e?hideEditorToolbars=true#z:OYLghAFBqd5TKALEBjA9gEwKYFFMCWALugE4A0BIEAZugHZEDKqAhgDbYgCMALOQCse5dq3qhUAUgBMAIRmzyAZ2ydURAg2rZ6mAMLp2AVwC29ENPI7MAGQL1sAOVMAjbKR78ADuiXFN9AbGZhbkPn4aDHYOziZuHnzKqtjqAUxErKREQabmlipqkfTpmUTRTq7unsoZWTkh%2BbVl9hVxVXwAlMroRqSoXADkMgDM9qjGOADUksN6SkSk9sAzuJIADACCI2MT2NOzmvOk2KwmK%2Btb0qP040ZTM3oAbikkpOebF/ZEkyas9hAdaYAdnkm0m4Mm80wIBAz3UZAeUJhRyWK0mjxmoI2EPRADovEYlEgAPouVioADWEBk0gAEqp2OhyNNpNIOpiLjjWEYSDIAGyTAAe%2BwAIujJABWWRrSUijlgiEAekVeIJRNJ5KpNIA7mR2JgwGAaezhrJJsrJgAFUjoFycEyTdCoVC9JSciFItA9b4PB5C/Z6P2e6zseXYiF0UiTCDckiTAiTEDowGSEHunHgz0YHkBv0ETHTBXg1Nyj5AkUDLrsEADCUDcjmAZrevoGuBuQKSE9Pp7EbcetEGvNjpdCkgCVrEQ13j1kzjyeN5vkVsDetKECTwdNyvkOCwFAYHD4YhkSjUOiMFgcLiJISWUTiECkQlEJKFALaXT1PISqy6cqxPE45hL4/gMN%2BFi/uEYH0ABlQeL%2BBQvGkTQQdIiHJKkDAlFkcFtAhNSlGhiFNHhQESl0Sjdv0NY0PQPx/PQALAliOKcN8Jg5o8oqTAAaikMIONqAJhjijz4oSSDUqy9LsIyzLGqJELsf6MxivyGJSjKEpyqa6bmiq4lqlJOp6gaRqsiarEQl4iyMOw9CGtJ0iprIIAzAAYiWNLMoKVn6bZXwOU5NKue5wxeeWPnJmGJY7tWtb1ouLY1gASi%2BXa9P0LLDNIA5DpWXRICcOAeACU4DDO5BzhODYFcuNZrhu5BbsOo7zhVwxJfVK75duXR7gg8AQCg2CCikPKnlQMakMASiWmIqhMEg6Dao2/bkBgJheAQohFAtDjsMtq3JZt6DbbtVTANwayWFtO2cKQADyPLHWt9VjSkGyzeuq5WONqDpIQjb1hezBsJw1RCNwIhiBICgKCIBAuOukBdOgXhFL9a7UTeNTAwdS0re9AwbdqpCsF4Nb9lWNZ1nV24NQMgoABx8gAtHyvCTMAzqTDduLSJMuAA5NUYQMerw5dwgLtvIch9W15DFawpXUO1tUJVVNULj1jXKM1rU7oNI0gJ9LqvGeM1zYTR3E%2Bt9b3btrD7YtdsnfVTuPU%2BfAs5OXvuC9zD2x9APfXN%2Bvm0D9j62DV6Q7eoQPqAz7zEjKPwOjmMBNj3RZVwjQE27b0O%2BQ5OU9T8V091jMrqnRCoPzuK8CzuJrMLotSxLhBSyMbKTOl8yK4VyslVU5Va7OHWnb1BubgVI7kGOms1l1DNLrPRuLwleXrylf1b10zykH4Wi8EAA%3D%3D%3D"></iframe>

---

**vs. JavaScript (move semantic/immutable)**

<iframe loading="lazy" width="100%" height="300" src="//jsfiddle.net/4tn5dr96/embedded/js,result/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

**vs. JavaScript (move semantic/immutable)**

<iframe loading="lazy" width="100%" height="500" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=c48a337336bf8cfa4c6768cbf7182dac" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

**vs. Python (fibonacci sequence)**

![](https://i.imgur.com/1WPCHxn.png)

---

**vs. Python (fibonacci sequence)**

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=00495529bd4304cba11ed9b6fef7e8cf" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

**vs. Kotlin (expression-oriented/pattern matching)**

<iframe loading="lazy" width="100%" height="550" src="https://pl.kotl.in/HWzvk-tSj" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

**vs. Kotlin (expression-oriented/pattern matching)**

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=12d301e87455ae90f4f3a2d03719626e" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

**vs. Ruby (quick sort)**

<iframe loading="lazy" width="100%" height="550" src="https://bit.ly/3aE8etB" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

## å¦‚ä½•åˆ†é¡ Rust é€™å€‹èªè¨€

> A language empowering everyone to build _reliable_ and _efficient_ software. 

- éœæ…‹å¼·å‹åˆ¥ç·¨è­¯èªè¨€ï¼ˆå€ŸåŠ© LLVM ç”¢ç”Ÿæ©Ÿå™¨ç¢¼ï¼‰
- [ç„¡åƒåœ¾å›æ”¶](https://steveklabnik.com/writing/borrow-checking-escape-analysis-and-the-generational-hypothesis)
- [å’Œ C ä¸€æ¨£å¿«](https://benchmarksgame-team.pages.debian.net/benchmarksgame/which-programs-are-fastest.html)
- è·¨å¹³å°ï¼ˆåŒ…å«ç€è¦½å™¨èˆ‡åµŒå…¥å¼ï¼‰

<img src="https://i.imgur.com/lfzuoPm.png" width="500px">

---

## Reliability: Memory Safety

- å®‰å…¨æ°¸é æ˜¯ Rust çš„ç¬¬ä¸€è€ƒé‡
- ç‚ºäº†å®‰å…¨ï¼Œå¯ä»¥çŠ§ç‰²ä¸€é»æ•ˆèƒ½ï¼Œä¾‹å¦‚ array boundary checkï¼Œæˆ–æ˜¯ç‚ºäº†è®“è‡ªå¼•è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ç½®ä¸è®Šï¼Œè€Œå¼•å…¥ä»¤äººè²»è§£çš„ [`core::pin::Pin`](http://doc.rust-lang.org/1.48.0/stable/pin/struct.Pin.html)ã€‚

![](rust-vs-others/rust-features.png)

_Image source: https://arxiv.org/pdf/2003.03296.pdf_

_Xu, H., Chen, Z., Sun, M., & Zhou, Y. (2020). Memory-Safety Challenge Considered Solved? An Empirical Study with All Rust CVEs. arXiv preprint arXiv:2003.03296._

---

### Reliability: Stability

Rust æä¾›çµ¦é–‹ç™¼è€…æ¥µç‚ºç©©å®šçš„é–‹ç™¼é«”é©—ï¼Œé™¤äº†å…­é€±ç™¼ä½ˆä¸€å€‹[å°ç‰ˆè™Ÿ](https://forge.rust-lang.org/#current-release-versions)

- åš´æ ¼éµå®ˆèªç¾©åŒ–ç‰ˆè™Ÿï¼Œ1.5 ç‰ˆçš„ code ç”¨ç¾åœ¨ï¼ˆ1.48ï¼‰ç‰ˆç·¨è­¯å™¨ä»èƒ½æ­£å¸¸ç·¨è­¯
- é–‹å‡ºå»çš„ API ä¸åƒ…è¦å‘éå»ç›¸å®¹ï¼Œ[æ›´å‘æœªä¾†ç›¸å®¹](https://github.com/rust-lang/cargo/blob/d484b65a/src/doc/src/reference/external-tools.md#information-about-package-structure)
- æ‰€æœ‰å¤§å‹ Feature éƒ½æœƒç¶“é[åš´æ ¼å¯©æ ¸çš„ RFC éç¨‹](https://rust-lang.github.io/rfcs/introduction.html)æ‰æœƒé–‹å§‹é–‹ç™¼

<img src="https://smallcultfollowing.com/babysteps/assets/2018-06-20-rfc-stages.svg" width="60%">

---

## Reliability: Community Trust

- æ‰€æœ‰ Roadmapã€ç¤¾ç¾¤æ²»ç†ï¼Œåœ˜éšŠæˆå“¡ç•°å‹•éƒ½å…¬å¸ƒåœ¨[å®˜æ–¹éƒ¨è½æ ¼](https://blog.rust-lang.org/)å’Œ[å®˜ç¶²](https://www.rust-lang.org/governance)
- ç‚ºäº† Rust åŸºé‡‘æœƒæˆç«‹ï¼Œé™¤äº†éåŒæ­¥æ”¶é›†æ„è¦‹ï¼Œå¦å¤–è¾¦äº†[ä¸‰å ´ç›´æ’­çµ¦ä¸åŒæ™‚å€çš„äººå³æ™‚èˆ‡åŸºé‡‘æœƒç±Œå‚™å°çµ„å°è«‡](https://blog.rust-lang.org/2020/12/07/the-foundation-conversation.html)
- åˆ°å®˜æ–¹è«–å£‡ã€å®˜æ–¹ Discord å’Œ Zulipï¼Œç”šè‡³éå®˜æ–¹ Redditï¼Œç¸½æ˜¯æœƒæœ‰å®˜æ–¹çš„äººæä¾›è§£ç­”çµ¦ä½ 

![](https://i.imgur.com/z8qYswD.png)

---

## Efficiency: Runtime Performance

éš¨æ„æ‰¾å€‹ä¾‹å­ï¼Œä¸è§£é‡‹

![](https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/10/grpc-perf-graph.png)

---

## Efficiency: Developing Performance

Rust æ³¨é‡é–‹ç™¼è€…é«”é©—ï¼Œé›–ç„¶ä»æœ‰éƒ¨åˆ†é¢å‘éœ€åŠ å¼·ï¼Œä½†æ•´é«”å·²ååˆ†å®Œå–„

- ä¸æ˜ç¢ºçš„ç·¨è­¯éŒ¯èª¤è¨Šæ¯è¦–ç‚º Bugï¼Œä»¥å¢åŠ ä½¿ç”¨è€…é–‹ç™¼é«”é©—
- è‡ªå¸¶ Cargo å¥—ä»¶ç®¡ç†å·¥å…· + ç·¨è­¯å·¥å…·ï¼Œå¯ä¸Šå‚³åˆ° [crates.io](https://crates.io)
- Docstringï¼ˆè¨»é‡‹å³æ–‡ä»¶ï¼‰å¯ç”¨ markdown ç·¨å¯«ï¼Œä¸¦å¯ç”Ÿæˆçš„ API docï¼ˆå®˜æ–¹ API doc é›†ä¸­ç‡Ÿ [docs.rs](https://docs.rs)ï¼‰

![](https://i.imgur.com/E3tbFbK.png)

---

## Efficiency: Resource Economy


- é›¶æˆæœ¬æŠ½è±¡ï¼Œç¯€èƒ½æ¸›ç¢³æ•‘åœ°çƒ
- å¥‰è¡Œ C++ çš„å“²å­¸**ã€Œyou only pay for what you useã€**

<img src="https://i.imgur.com/g701giw.png" width="50%">

---

## Rust ç‰¹æ€§ä¸€è¦½

![](https://i.imgur.com/RPm2Bxk.png)

_Sourceï¼š[2020 å¹´åº¦ Rust å®˜æ–¹å•å·èª¿æŸ¥çµæœ](https://blog.rust-lang.org/2020/12/16/rust-survey-2020.html)_

---

class: middle

## Variables

```rust
let name = "Ashley";
let age = 30;
println!("Hi, {}! You are {} years old.", name, age);
```

---

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=82b7ae3f9b48c7d17a154846118cd9e0" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

`x` å®£å‘Šå…©æ¬¡ï¼Œç·¨è­¯æœƒéå—ï¼Ÿ

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=4cf9568b384bdf83d871d7e073cf26df" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

[åŸç”Ÿå‹åˆ¥](https://doc.rust-lang.org/stable/std/#primitives)

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=e85ff4b6431931c26d3022b7677b16a3" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

å‡½å¼é€™æ¨£å®£å‘Š

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=fn%20add(x%3A%20i32%2C%20y%3A%20i32)%20-%3E%20i32%20%7B%0A%20%20%20%20x%20%2B%20y%20%2F%2F%20%E6%B2%92%E6%9C%89%20return%20%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%E5%97%8E%EF%BC%9F%EF%BC%9F%EF%BC%9F%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20println!(%22%7B%7D%22%2C%20add(42%2C%2013))%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

ç‚ºä»€éº¼é™£åˆ—ç·¨è­¯ä¸éï¼Ÿ

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=%2F%2F%20Why%20this%20cannot%20compile%3F%0A%0Afn%20main()%20%7B%0A%20%20%20%20let%20mut%20color%20%3D%20%5B255%2C%200%2C%20255%5D%3B%0A%20%20%20%20color%5B0%5D%20%3D%20100%3B%0A%20%20%20%20color%20%3D%20%5B255%2C%200%2C%20244%5D%3B%0A%20%20%20%20color%20%3D%20%5B222%2C%2022%5D%3B%0A%20%20%20%20println!(%22The%20color%20is%20%7B%3A%3F%7D%22%2C%20color)%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

é€šå¸¸ä½¿ç”¨ [Vec](https://doc.rust-lang.org/stable/std/vec/struct.Vec.html) å‹•æ…‹é™£åˆ—

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=%2F%2F%20%E5%8B%95%E6%85%8B%E9%99%A3%E5%88%97%E6%89%8D%E8%83%BD%E5%8B%95%E6%85%8B%E5%A2%9E%E5%8A%A0%E5%85%83%E7%B4%A0%0A%2F%2F%20%E4%BF%AE%E5%BE%A9%E6%88%91%EF%BC%81%0Afn%20main()%20%7B%0A%20%20%20%20let%20prices%20%3D%20vec!%5B30%2C%20100%2C%202%5D%3B%0A%20%20%20%20prices%5B0%5D%20%3D%2025%3B%0A%20%20%20%20prices.push(40)%3B%0A%20%20%20%20println!(%22All%20the%20prices%20are%3A%20%7B%3A%3F%7D%22%2C%20prices)%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

è¿´åœˆé€™æ¨£å¯«

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=fn%20main()%20%7B%0A%20%20%20%20for%20i%20in%200..10%20%7B%0A%20%20%20%20%20%20%20%20println!(%22Number%20%7B%7D%22%2C%20i)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20ch%20%3D%20vec!%5B%22%E5%81%89%22%2C%20%22%E8%88%AA%22%2C%20%22%E5%B8%A5%22%5D%3B%0A%20%20%20%20for%20ch%20in%20ch.iter()%20%7B%0A%20%20%20%20%20%20%20%20println!(%22%7B%7D%2F%22%2C%20ch)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20while%20%5Bboolean%5D%20%7B%7D%0A%20%20%20%20%2F%2F%20loop%20%7B%7D%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

## [æ‰€æœ‰æ¬Š Ownership](https://rust-lang.tw/book-tw/ch04-01-what-is-ownership.html)

- Rust ä¸­æ¯å€‹æ•¸å€¼éƒ½æœƒæœ‰ä¸€å€‹è®Šæ•¸ä½œç‚ºå®ƒçš„æ“æœ‰è€…ï¼ˆownerï¼‰ã€‚
- åŒæ™‚é–“åªèƒ½æœ‰ä¸€å€‹æ“æœ‰è€…ã€‚
- ç•¶æ“æœ‰è€…é›¢é–‹ä½œç”¨åŸŸæ™‚ï¼Œæ•¸å€¼å°±æœƒè¢«ä¸Ÿæ£„ã€‚ï¼ˆ[RAII](https://en.wikipedia.org/wiki/RAII)ï¼‰

```rust
let s1 = String::from("hello");
let s2 = s1; // s2 is the new owner.
println!("{}, world!", s1); // Error. Value is moved.
```

<img src="https://doc.rust-lang.org/stable/book/img/trpl04-04.svg" width="40%">

---

å‡½å¼åƒæ•¸ä¹Ÿæœƒé€²è¡Œæ‰€æœ‰æ¬Šè½‰æ›

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=%2F%2F%20%E8%AE%93%E4%BB%96%E6%88%90%E5%8A%9F%E7%B7%A8%E8%AD%AF%EF%BC%81%0A%0Apub%20fn%20main()%20%7B%0A%20%20%20%20let%20v%20%3D%20Vec%3A%3Anew()%3B%0A%0A%20%20%20%20fill_vec(v)%3B%0A%20%20%20%20println!(%22%7B%7D%20has%20length%20%7B%7D%20content%20%7B%3A%3F%7D%22%2C%20%22vec1%22%2C%20v.len()%2C%20v)%3B%0A%0A%20%20%20%20v.push(88)%3B%0A%20%20%20%20println!(%22%7B%7D%20has%20length%20%7B%7D%20content%20%7B%3A%3F%7D%22%2C%20%22vec1%22%2C%20v.len()%2C%20v)%3B%0A%0A%7D%0A%0Afn%20fill_vec(vec%3A%20Vec%3Ci32%3E)%20%7B%0A%20%20%20%20let%20vec%20%3D%20vec%3B%0A%20%20%20%20vec.push(22)%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

class: middle, center

# å¦‚æœ Rust ä¸èƒ½å…±ç”¨è®Šæ•¸ï¼Œé‚£å¯«å± codeï¼Ÿï¼Ÿï¼Ÿ

![](https://i.imgur.com/9lFEsjq.png)

---

[å¯è®Šå¼•ç”¨èˆ‡ä¸å¯è®Šå¼•ç”¨](https://rust-lang.tw/book-tw/ch04-02-references-and-borrowing.html)

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=fn%20main()%20%7B%0A%20%20%20%20let%20v%20%3D%20vec!%5B1%2C%202%2C%203%5D%3B%0A%20%20%20%20print_vec(%26v)%3B%0A%20%20%20%20print_vec(%26v)%3B%0A%7D%0Afn%20print_vec(v%3A%20%26Vec%3Ci32%3E)%20%7B%20%2F%2F%20%26T%20%E4%BB%A3%E8%A1%A8%E5%80%9F%E7%94%A8%0A%20%20%20%20println!(%22v%20is%20%7B%3A%3F%7D%22%2C%20v)%3B%0A%7D%0A" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

## [å¯è®Šå¼•ç”¨èˆ‡ä¸å¯è®Šå¼•ç”¨](https://rust-lang.tw/book-tw/ch04-02-references-and-borrowing.html)

åœ¨åŒä¸€å€‹ scope ä¸‹ï¼ŒRust æƒ¡åæ˜­å½°çš„ borrow checker æœƒæª¢æŸ¥æ‰€æœ‰çš„å¼•ç”¨ï¼š

- åŒæ™‚æœ‰å¤šå€‹ `&T` ä¸å¯è®Šå¼•ç”¨ï¼Œä½†ç„¡æ³•èˆ‡ `&mut T` åŒæ™‚å­˜åœ¨
- åªèƒ½æœ‰ä¸€å€‹ `&mut T` å¯è®Šå¼•ç”¨ï¼Œä¸”ç„¡æ³•èˆ‡ `&T` åŒæ™‚å­˜åœ¨

åŒæ¨£åœ°ï¼Œå¼•ç”¨èˆ‡æ•¸å€¼çš„æ‰€æœ‰æ¬Šè¡Œç‚ºç›¸åŒï¼Œå‡ºäº†ä½œç”¨åŸŸå°±æœƒè¢«ä¸Ÿæ£„ï¼ˆ[drop](http://doc.rust-lang.org/stable/core/ops/trait.Drop.html)ï¼‰

```rust
fn main() {
    let mut v = vec![1, 2, 3];
    change_vec(&mut v);
    change_vec(&mut v);
    println!("v is {:?}", v);
}
fn change_vec(v: &mut Vec<i32>) {
    v[0] *= 5;
    // `v` é€™å€‹ &mut å¼•ç”¨åœ¨æ­¤è¢« dropï¼Œä½†ä¸å½±éŸ¿åŸå§‹çš„ `vec![1,2,3]`
}
```

---

å‰é¢çš„é¡Œç›®ï¼Œæ”¹å¯«æˆå€Ÿç”¨å½¢å¼

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=%2F%2F%20%E8%AB%8B%E6%94%B9%E5%AF%AB%E6%88%90%E3%80%8C%E5%80%9F%E7%94%A8%E3%80%8D%E5%BD%A2%E5%BC%8F%EF%BC%81%0A%0Apub%20fn%20main()%20%7B%0A%20%20%20%20let%20v%20%3D%20Vec%3A%3Anew()%3B%0A%0A%20%20%20%20fill_vec(v)%3B%0A%20%20%20%20println!(%22%7B%7D%20has%20length%20%7B%7D%20content%20%7B%3A%3F%7D%22%2C%20%22vec1%22%2C%20v.len()%2C%20v)%3B%0A%0A%20%20%20%20v.push(88)%3B%0A%20%20%20%20println!(%22%7B%7D%20has%20length%20%7B%7D%20content%20%7B%3A%3F%7D%22%2C%20%22vec1%22%2C%20v.len()%2C%20v)%3B%0A%0A%7D%0A%0Afn%20fill_vec(vec%3A%20Vec%3Ci32%3E)%20%7B%0A%20%20%20%20let%20vec%20%3D%20vec%3B%0A%20%20%20%20vec.push(22)%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

å¯è®Šå¼•ç”¨å†ä¸€é¡Œï¼Œå˜—è©¦æ”¹è®Š `Foo` struct çš„è³‡æ–™çµæ§‹

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=struct%20Foo%20%7B%0A%20%20%20%20x%3A%20i32%2C%0A%7D%0A%0Afn%20add_foo_x(f%3A%20%26mut%20Foo)%20%7B%0A%20%20%20%20%2F%2F%20%E5%8F%AF%E8%AE%8A%E5%BC%95%E7%94%A8%E5%82%B3%E5%85%A5%E5%BE%8C%EF%BC%8C%E6%9C%83%E5%9C%A8%E9%80%99%E8%A3%A1%20drop%20%E6%8E%89%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20let%20mut%20foo%20%3D%20Foo%20%7B%20x%3A%2042%20%7D%3B%0A%20%20%20%20add_foo_x(foo)%3B%0A%20%20%20%20%2F%2F%20%E5%95%8F%E9%A1%8C%EF%BC%9A%E5%98%97%E8%A9%A6%E5%8D%B0%E5%87%BA%20Foo%20%7B%20x%3A%2044%20%7D%0A%20%20%20%20println!(%22%7B%3A%3F%7D%22%2C%20foo)%3B%0A%7D" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

### æ²’æœ‰æ¬¡å›çš„æ¬¡å›é å‘Šï¼š[Lifetime annotation](https://rust-lang.tw/book-tw/ch10-03-lifetime-syntax.html)

<img src="https://rufflewind.com/img/rust-move-copy-borrow.png" width="45%">

_Source: [Graphical depiction of ownership and borrowing in Rust](https://rufflewind.com/2017-02-15/rust-move-copy-borrow)_

---

å¦‚ä½•æ¨™è¨»[ç”Ÿå‘½é€±æœŸ](https://rust-lang.tw/book-tw/ch10-03-lifetime-syntax.html)ï¼ˆä¸€èˆ¬æƒ…æ³ä¸‹ä½ ä¸æœƒä¹Ÿä¸æƒ³åšé€™ä»¶äº‹ï¼‰

<iframe loading="lazy" width="100%" height="550" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=fn%20longest%3C'a%3E(x%3A%20%26'a%20str%2C%20y%3A%20%26'a%20str)%20-%3E%20%26'a%20str%20%7B%0A%20%20%20%20if%20x.len()%20%3E%20y.len()%20%7B%0A%20%20%20%20%20%20%20%20x%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20y%0A%20%20%20%20%7D%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20let%20s1%20%3D%20String%3A%3Afrom(%22abcd%22)%3B%0A%20%20%20%20let%20s2%20%3D%20String%3A%3Afrom(%22efghi%22)%3B%0A%20%20%20%20let%20longer%20%3D%20longest(s2.as_str()%2C%20s2.as_str())%3B%0A%20%20%20%20%0A%20%20%20%20println!(%22%E6%9C%80%E9%95%B7%E7%9A%84%E6%98%AF%20%7B%3A%3F%7D%22%2C%20longer)%3B%0A%7D%0A" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>

---

## FAQ

- Qï¼šRust ä¸»è¦æƒ³è§£æ±ºèª°çš„ç—›é»

æœ€åˆæ˜¯ Firefox åœ¨å¹³è¡Œè™•ç† CSS ç”¨ C++ å¯«ä¸€ç›´æœ‰å„ç¨® memory bugï¼Œä¸éæœ€è¿‘ Mozilla è£æ‰ä¸€å † Rust/Servo çš„äºº ğŸ˜‚

- Qï¼šç•¶åˆç‚ºä»€éº¼æƒ³å­¸ Rust

åŸæœ¬æ˜¯åƒå­¸å€‹æœ‰è¾¦æ³•æ‘¸è¨˜æ†¶é«”é…ç½®çš„èªè¨€ï¼Œçœ‹ä¾†çœ‹å»é¸æ“‡ä¸å¤šï¼ŒåŠ ä¸Šå° Mozilla ç¤¾ç¾¤é–‹æºç†å¿µçš„æ”¯æŒã€‚

- Qï¼šRust æœ€ç‚ºäººè©¬ç—…çš„åœ°æ–¹

ç·¨è­¯é€Ÿåº¦æ²’æœ‰ä¹‹ä¸€ï¼Œè·Ÿ C++ æœ‰å¾—æ¯”ã€‚

- Qï¼šç‚ºä»€éº¼ Rust æ¨™æº–å‡½å¼åº«ç¼ºæ±ç¼ºè¥¿çš„ï¼Œé€£ random éƒ½æ²’æœ‰

Rust åœ˜éšŠç‚ºäº†å‡½å¼åº«çš„ç©©å®šèˆ‡ç›¸å®¹æ€§ï¼Œéå¸¸åš´æ ¼æŠŠé—œé€²å…¥æ¨™æº–å‡½å¼åº«çš„å‡½å¼ï¼Œåƒ regex å’Œ random é€™ç¨®å¤§å®¶éœ€æ±‚å·®ç•°å¤§ï¼Œè€Œä¸”è¿­ä»£æ›´æ–°å¿«é€Ÿçš„å¥—ä»¶ï¼Œå°±å‚¾å‘ç”±ç¤¾ç¾¤ç®¡ç†ã€‚ä»¥å…ç™¼ç”Ÿåƒ urllib urllib2 ç­‰æ··äº‚æˆ–äººåŠ›ä¸è¶³ã€‚

---

## FAQ

- Qï¼šRust ( æˆ– Rust ç›¸é—œ io framework ) çš„ io è™•ç†æ©Ÿåˆ¶èˆ‡ Node.js/Go çš„æ¯”è¼ƒ

æˆ‘çŒœæ‡‰è©²æ˜¯æƒ³å• async IO æˆ–æ˜¯ web framework é€™ç¨® IOã€‚

Rust æ¨™æº–å‡½å¼åº«æä¾›éåŒæ­¥è¨ˆç®—çš„æŠ½è±¡ [trait Future](https://doc.rust-lang.org/stable/std/future/trait.Future.html) å’Œå…¶ä»–ç›¸é—œçš„åŠŸèƒ½ï¼Œä¸¦ä¸” Rust æ”¯æ´ `async` èªæ³•ï¼Œå¯ä»¥è®“ function æˆ– block è®ŠæˆéåŒæ­¥ï¼Œå›å‚³ä»»ä½• `impl Future`ï¼ˆå¯ä»¥æƒ³åƒæ˜¯å›å‚³ JavaScript çš„ Promiseï¼‰ã€‚ç”±æ–¼æ²’æœ‰ç›´æ¥æä¾› runtimeï¼Œæ‰€ä»¥ Rust ç”Ÿæ…‹è‡ªå¹¹è¼ªå­å¯«äº†å¾ˆå¤šå¥—é¡ä¼¼ libuv libev ç­‰ async Runtimeï¼Œæœ€æœ‰åæ”¯æ´åº¦æœ€å¥½çš„æ˜¯ [Tokio](https://tokio.rs/)ã€‚Tokio å°±å¹¾ä¹é¡ä¼¼ libuvï¼Œå‘¼å« epoll/kqueue/IOCP ç„¶å¾Œæœ‰å€‹ event loop å’Œå„ç¨® work-stealth mode çš„ Schudulerï¼ˆç›®å‰æ˜¯é€™å€‹æ¨¡å¼ï¼‰ã€‚

ç”±æ–¼ Rust åŸç”Ÿæ”¯æ´ `async fn`ï¼Œæ‰€ä»¥å¯«èµ·ä¾†æ›´æ¥è¿‘ JavaScriptï¼Œå’Œ Go è‡ªå·±å¯¦ä½œ callstack çš„ coroutine åè€Œä¸å¤ªä¸€æ¨£ã€‚ä¸éå—ç›Šæ–¼ Rust å¼·å¤§çš„ Macro systemï¼Œä¹Ÿæœ‰åšå‡º[é¡ä¼¼ Goroutine çš„å¥—ä»¶](https://github.com/Xudong-Huang/may)ã€‚

- Qï¼šç¾åœ¨å…¥å‘ä¾†å¾—åŠå—

çµ•å°ä¾†å¾—åŠï¼Œè¨±å¤šé–‹æºå°ˆæ¡ˆé‚„æœ‰ä¸å°‘ä½å‚çš„æœå¯¦ï¼Œå°ç£ Rust ç”Ÿæ…‹ä¹Ÿä¸å®Œå–„ï¼Œå°±ç¼ºä½ ç•¶ç¤¾ç¾¤å¤§ä½¬ã€‚

---

## å­¸ç¿’è³‡æº

- [Rust å®˜ç¶²](https://www.rust-lang.org/zh-TW/)
- [Rust ç¨‹å¼è¨­è¨ˆèªè¨€ï¼ˆæ­£é«”ä¸­æ–‡ç‰ˆï¼‰](https://rust-lang.tw/book-tw)ï¼ˆé€™æ˜¯å®˜æ–¹æ•™å­¸ï¼‰
- [Rust æ¨™æº–å‡½å¼åº«](https://doc.rust-lang.org/std/)ï¼ˆæ¨è–¦é–±è®€ï¼å¯ä»¥å­¸åˆ°è¶…å¤šï¼‰
- [Rust è¶…è©³ç´°éå®˜æ–¹ä½œå¼Šè¡¨](https://cheats.rs/)
- [Rust ç‰ˆ Caniuse.rs](https://caniuse.rs/)
- [Rust Taiwan Telegram ç¾¤çµ„](https://t.me/rust_tw)
- [è‡´æ•¬ A Tour of Go çš„ Tour of Rust](https://tourofrust.com/00_en.html)ï¼ˆå“è³ªé‚„è¡Œï¼Œä½†ç¹ä¸­ç¿»è­¯æœ‰ç¼ºéœ€åŠ å¼·ï¼‰
- ç›´æ¥åœ¨ Twitter/GitHub/Telegram è¯çµ¡æˆ‘ @weihanglo


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
